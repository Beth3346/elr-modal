!function($){window.elrModal=function(params){var self={},spec=params||{},modalClass=spec.modalClass||"elr-modal",lightboxClass=spec.lightboxClass||"elr-blackout",closeClass=spec.closeClass||"elr-modal-close",buttonClass=spec.buttonClass||"elr-modal-open",speed=spec.speed||300,$modals=$("."+modalClass),createLightbox=function(speed,$modal){var $close=$("<button></button>",{"class":"close",text:"x"}),$lightbox=$("<div></div>",{"class":lightboxClass});$lightbox.hide().appendTo("body").fadeIn(speed,function(){$close.appendTo($lightbox),$modal.appendTo($lightbox).show()})},showModal=function(speed){var modalId=$(this).data("modal"),$modal=$("#"+modalId);createLightbox(speed,$modal)},hideModal=function(speed){var $lightbox=$("."+lightboxClass),$modal=$lightbox.find("."+modalClass);$lightbox.fadeOut(speed,function(){$modal.hide().appendTo("body"),$(this).remove()})};if($modals.length){var $body=$("body");$modals.hide().appendTo("body"),$body.on("click","."+buttonClass,function(e){e.preventDefault(),e.stopPropagation(),showModal.call(this,speed)}),$("."+closeClass).on("click",function(e){e.preventDefault(),e.stopPropagation(),hideModal()}),$body.on("click","."+lightboxClass+" .close",function(e){e.preventDefault(),e.stopPropagation(),hideModal()}),$body.on("click",function(){hideModal()}),$modals.on("click",function(e){e.stopPropagation()})}return self}}(jQuery);